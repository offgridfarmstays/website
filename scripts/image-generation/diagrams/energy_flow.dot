// Energy Flow Diagram for Offgrid Farmstays
// Generate with: dot -Tpng energy_flow.dot -o ../../assets/diagrams/energy_flow.png

digraph EnergyFlow {
    // Graph settings
    rankdir=TB;
    bgcolor="transparent";
    fontname="Arial";
    compound=true;

    // Node styles
    node [fontname="Arial", fontsize=11, style=filled];

    // Source node
    sun [label="SOLAR ENERGY", shape=ellipse, fillcolor="#FFD700", fontcolor=black, penwidth=3, color="#FF8C00", fontsize=13];

    // Solar panels
    solar [label="SOLAR PANELS\n━━━━━\nOversized Array\n100% Production", shape=box, fillcolor="#FFA500", fontcolor=white, penwidth=2];

    // Distribution
    subgraph cluster_distribution {
        label="Energy Distribution";
        style=dashed;
        color="#4A7C59";
        fontsize=12;

        retreat [label="RETREAT\nConsumption\n━━━━━\nLights, Appliances\nHVAC, Water Heating", shape=box, fillcolor="#E8F4F8", color="#4682B4", penwidth=2];

        mining [label="BITCOIN\nMining\n━━━━━\nASIC Miners\nImmersion Cooled", shape=box, fillcolor="#FFF9E6", color="#F7931A", penwidth=2];

        battery [label="STORAGE\nBattery\n━━━━━\nNighttime Use\nBackup Power", shape=box, fillcolor="#E8F8E8", color="#228B22", penwidth=2];
    }

    // Heat reuse
    heat [label="HEAT REUSE\n━━━━━\nWaste Heat Capture\n\nFrom Mining", shape=box, fillcolor="#FFE4B5", color="#FF4500", penwidth=2];

    // Heat applications
    subgraph cluster_heat_use {
        label="Heat Applications";
        style=dashed;
        color="#FF4500";
        fontsize=12;

        hotwater [label="Hot Water", shape=box, fillcolor="#FFE4E1"];
        heating [label="Space Heating\nRadiant Floors", shape=box, fillcolor="#FFE4E1"];
        hottub [label="Hot Tub/Spa\nYear-round", shape=box, fillcolor="#FFE4E1"];
    }

    // Output
    revenue [label="REVENUE\n━━━━━\n\nGuest Bookings\nBitcoin Earnings", shape=box, style="filled,rounded", fillcolor="#90EE90", color="#228B22", penwidth=3, fontsize=12];

    // Connections
    sun -> solar [label="Sunlight", penwidth=2, color="#FFD700"];
    solar -> retreat [penwidth=2, color="#4682B4"];
    solar -> mining [penwidth=3, color="#F7931A"];
    solar -> battery [penwidth=1, color="#228B22"];

    mining -> heat [label="Waste Heat", penwidth=2, color="#FF4500", fontcolor="#FF4500"];
    heat -> hotwater [penwidth=1.5];
    heat -> heating [penwidth=1.5];
    heat -> hottub [penwidth=1.5];

    retreat -> revenue [style=dashed];
    mining -> revenue [style=dashed];

    // Badge
    badge [label="100% RENEWABLE\nZERO WASTE", shape=box, style="filled,rounded", fillcolor="#4A7C59", fontcolor=white, penwidth=3];

    // Title
    labelloc="t";
    label=<<b>Integrated Energy System Flow</b><br/>Solar → Retreat + Bitcoin + Heat Reuse>;
    fontsize=16;
}
